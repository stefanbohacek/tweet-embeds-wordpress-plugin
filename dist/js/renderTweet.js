function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var renderTweet=function(data,container){// console.log('debug:', data);
var tweetText=data.text,tweetUrl="https://twitter.com/".concat(data.users[0].username,"/status/").concat(data.id),verifiedBadge=data.users[0].verified?"<svg role=\"img\" aria-label=\"Verified user\" class=\"tweet-verified-user-badge\" viewBox=\"0 0 24 24\" aria-label=\"Verified account\" class=\"r-13gxpu9 r-4qtqp9 r-yyyyoo r-1xvli5t r-9cviqr r-dnmrzs r-bnwqim r-1plcrui r-lrvibr\"><g><path d=\"M22.5 12.5c0-1.58-.875-2.95-2.148-3.6.154-.435.238-.905.238-1.4 0-2.21-1.71-3.998-3.818-3.998-.47 0-.92.084-1.336.25C14.818 2.415 13.51 1.5 12 1.5s-2.816.917-3.437 2.25c-.415-.165-.866-.25-1.336-.25-2.11 0-3.818 1.79-3.818 4 0 .494.083.964.237 1.4-1.272.65-2.147 2.018-2.147 3.6 0 1.495.782 2.798 1.942 3.486-.02.17-.032.34-.032.514 0 2.21 1.708 4 3.818 4 .47 0 .92-.086 1.335-.25.62 1.334 1.926 2.25 3.437 2.25 1.512 0 2.818-.916 3.437-2.25.415.163.865.248 1.336.248 2.11 0 3.818-1.79 3.818-4 0-.174-.012-.344-.033-.513 1.158-.687 1.943-1.99 1.943-3.484zm-6.616-3.334l-4.334 6.5c-.145.217-.382.334-.625.334-.143 0-.288-.04-.416-.126l-.115-.094-2.415-2.415c-.293-.293-.293-.768 0-1.06s.768-.294 1.06 0l1.77 1.767 3.825-5.74c.23-.345.696-.436 1.04-.207.346.23.44.696.21 1.04z\"></path></g></svg>":"",renderedTweetHTML="<div class=\"card w-100\">\n  <div class=\"tweet-body-wrapper card-body pt-4\">\n  <div class=\"card-text\">\n  <div class=\"row no-gutters mb-1\">";data.users[0].profile_image_url&&(renderedTweetHTML+="<div class=\"col-2 col-sm-1 col-md-1\">\n    <a href=\"https://twitter.com/".concat(data.users[0].username,"\" class=\"text-decoration-none\"><img title=\"Profile image\" alt=\"Profile image of @").concat(data.users[0].username,"\" loading=\"lazy\" class=\"rounded-circle border\" width=\"48\" height=\"48\" src=\"/wp-json/ftf/proxy-media?url=").concat(data.users[0].profile_image_url,"\"></a>\n    </div>")),renderedTweetHTML+="<div class=\"tweet-author ".concat(data.users[0].profile_image_url?"col-9 col-sm-10 col-md-10 pl-2":"col-11 col-sm-11 col-md-11"," pb-3\">\n  <p class=\"font-weight-bold mb-0 mt-0\"><a class=\"text-dark text-decoration-none\" href=\"https://twitter.com/").concat(data.users[0].username,"\">").concat(data.users[0].name).concat(verifiedBadge,"</a></p>\n  <p class=\"mb-1 mb-md-2 mt-0\"><a class=\"text-muted text-decoration-none\" href=\"https://twitter.com/").concat(data.users[0].username,"\">@").concat(data.users[0].username,"</a></p>\n  </div>\n  <div class=\"col-1 text-right\">\n  <a href=\"").concat(tweetUrl,"\" target=\"_blank\"><svg role=\"img\" aria-label=\"Twitter logo\" style=\"width: 24px;\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path d=\"M512 97.248c-19.04 8.352-39.328 13.888-60.48 16.576 21.76-12.992 38.368-33.408 46.176-58.016-20.288 12.096-42.688 20.64-66.56 25.408C411.872 60.704 384.416 48 354.464 48c-58.112 0-104.896 47.168-104.896 104.992 0 8.32.704 16.32 2.432 23.936-87.264-4.256-164.48-46.08-216.352-109.792-9.056 15.712-14.368 33.696-14.368 53.056 0 36.352 18.72 68.576 46.624 87.232-16.864-.32-33.408-5.216-47.424-12.928v1.152c0 51.008 36.384 93.376 84.096 103.136-8.544 2.336-17.856 3.456-27.52 3.456-6.72 0-13.504-.384-19.872-1.792 13.6 41.568 52.192 72.128 98.08 73.12-35.712 27.936-81.056 44.768-130.144 44.768-8.608 0-16.864-.384-25.12-1.44C46.496 446.88 101.6 464 161.024 464c193.152 0 298.752-160 298.752-298.688 0-4.64-.16-9.12-.384-13.568 20.832-14.784 38.336-33.248 52.608-54.496z\" fill=\"#03a9f4\"/></svg></a>\n  </div>\n  </div>\n  <div class=\"tweet-body\">"),data.entities&&(data.entities.urls&&data.entities.urls.forEach(function(url){tweetText=-1===url.display_url.indexOf("pic.twitter.com")?tweetText.replace(RegExp(url.url,"ig"),"<a href=\"".concat(url.expanded_url,"\" target=\"_blank\">").concat(url.display_url,"</a>")):tweetText.replace(url.url,"")}),data.entities.mentions&&data.entities.mentions.forEach(function(mention){tweetText=tweetText.replace(RegExp("@".concat(mention.username),"ig"),"<a href=\"https://twitter.com/".concat(mention.username,"\" target=\"_blank\">@").concat(mention.username,"</a>"))}),data.entities.hashtags&&data.entities.hashtags.forEach(function(hashtag){tweetText=tweetText.replace(RegExp("#".concat(hashtag.tag),"ig"),"<a href=\"https://twitter.com/hashtag/".concat(hashtag.tag,"\" target=\"_blank\">#").concat(hashtag.tag,"</a>"))})),data.media&&data.media.length&&(tweetText+="<div data-media-length=\"".concat(data.media.length,"\" class=\"tweet-media row mt-3 no-gutters\">"),data.media.forEach(function(media,index){tweetText+=1===data.media.length?"<div data-media-type=\"".concat(media.type,"\" class=\"text-center col-sm-12 col-md-12 col-lg-12\">"):3===data.media.length?2===index?"<div data-media-type=\"".concat(media.type,"\" class=\"text-center col-sm-12 col-md-12 col-lg-12\">"):"<div data-media-type=\"".concat(media.type,"\" class=\"text-center col-sm-12 col-md-6 col-lg-6\">"):1<data.media.length&&5>data.media.length?"<div data-media-type=\"".concat(media.type,"\" class=\"text-center col-sm-12 col-md-6 col-lg-6\">"):"<div data-media-type=\"".concat(media.type,"\" class=\"text-center col-sm-12 col-md-3 col-lg-3\">"),"animated_gif"===media.type?tweetText+="<video class=\"w-100 mt-0\" controls loop><source src=\"/wp-json/ftf/proxy-media?url=".concat(media.preview_image_url.replace("pbs.twimg.com/tweet_video_thumb","video.twimg.com/tweet_video").replace(".jpg",".mp4").replace(".png",".mp4"),"\" type=\"video/mp4\"></video>"):"video"===media.type?media.variants?tweetText+="<video class=\"w-100 mt-0\" controls loop><source src=\"/wp-json/ftf/proxy-media?url=".concat(media.variants[media.variants.length-1].url,"\" type=\"").concat(media.variants[media.variants.length-1].content_type,"\"></video>"):tweetText+="<a class=\"tweet-video-placeholder\" href=\"".concat(tweetUrl,"\" target=\"_blank\"><img alt=\"").concat(media.alt_text||"Video preview image","\" loading=\"lazy\" width=\"").concat(media.width,"\" height=\"").concat(media.height,"\" class=\"w-100 rounded border\" src=\"/wp-json/ftf/proxy-media?url=").concat(media.preview_image_url,"\"></a>"):"photo"===media.type&&(tweetText+="<a href=\"".concat(tweetUrl,"\" target=\"_blank\"><img alt=\"").concat(media.alt_text||"","\" loading=\"lazy\" width=\"").concat(media.width,"\" height=\"").concat(media.height,"\" class=\"w-100 rounded border\" src=\"/wp-json/ftf/proxy-media?url=").concat(media.url,"\"></a>")),tweetText+="</div>"}),tweetText+="</div>"),data.polls&&data.polls.length&&(tweetText+="<div class=\"mt-0 row\">",data.polls.forEach(function(poll){if(poll.options&&poll.options.length){var voteCounts=poll.options.map(function(option){return option.votes}),voteCountMax=Math.max.apply(Math,_toConsumableArray(voteCounts)),votesTotal=voteCounts.reduce(function(total,num){return total+num});poll.options.forEach(function(option){var votesPortion=100*(option.votes/votesTotal);tweetText+="\n          <div class=\"tweet-poll-results col-9\" style=\"height:60px;\">\n          <div class=\"progress position-relative mt-n4 ".concat(option.votes===voteCountMax?" border border-primary ":"","\" style=\"height:30px;\">\n          <div class=\"progress-bar\" \n          role=\"progressbar\" \n          style=\"width: ").concat(votesPortion,"%\" \n          aria-valuenow=\"").concat(votesPortion,"\" \n          aria-valuemin=\"0\" \n          aria-valuemax=\"100\"></div>\n          <span class=\"pl-2 d-flex position-absolute w-100\" style=\"font-size: 1rem; line-height: 30px;\">").concat(option.label,"</span>\n          </div>\n          </div>\n          <div class=\"col-3 mt-n4 text-right\" style=\"height:60px;\">\n          <span class=\"w-100\">").concat(Math.round(100*(option.votes/votesTotal)),"%</span>\n          </div>")}),tweetText+="<div class=\"col-12 mt-3\"><p class=\"text-muted\">".concat(votesTotal.toLocaleString()," votes</p></div>")}}),tweetText+="</div>");var tweetDate=new Date(data.created_at).toLocaleDateString(navigator.language,{month:"long",year:"numeric",day:"numeric"});renderedTweetHTML+=tweetText+"</div>\n  </div>\n  </div>\n  <div class=\"card-footer\">",container||(ftf_aet.config.show_metrics&&data.public_metrics&&(renderedTweetHTML+="\n      <span class=\"tweet-icon\" role=\"img\" aria-label=\"Retweets\">\uD83D\uDD01</span><a class=\"text-muted\" href=\"".concat(tweetUrl,"\" target=\"_blank\">").concat(data.public_metrics.retweet_count.toLocaleString(),"</a> |\n      <span class=\"tweet-icon\" role=\"img\" aria-label=\"Likes\">\u2764\uFE0F</span> <a class=\"text-muted\" href=\"").concat(tweetUrl,"\" target=\"_blank\">").concat(data.public_metrics.like_count.toLocaleString(),"</a> | ")),renderedTweetHTML+="<a class=\"text-muted\" href=\"".concat(tweetUrl,"\" target=\"_blank\">").concat(tweetDate,"</a>")),renderedTweetHTML+="</div></div>";var renderedTweet=document.createElement("div");renderedTweet.className="twitter-tweet twitter-tweet-rendered w-100",renderedTweet.innerHTML=renderedTweetHTML;var lastUrl="";if(data.entities&&data.entities.urls&&data.entities.urls.length&&(lastUrl=data.entities.urls[data.entities.urls.length-1]),(data.media&&data.media.length||data.extended_entities&&data.extended_entities.media&&data.extended_entities.media.length)&&(lastUrl=""),lastUrl&&(renderedTweet.dataset.urlAttachment=lastUrl.expanded_url,renderedTweet.dataset.urlAttachmentProcessed="false"),container){var tweetContainer=container.querySelector(".tweet-body a:last-of-type");console.log(tweetContainer),tweetContainer.parentNode.replaceChild(renderedTweet,tweetContainer)}else{var tweet=document.querySelector("[data-tweet-id=\"".concat(data.id,"\"]"));tweet.parentNode.replaceChild(renderedTweet,tweet)}// if (data.id === '1214098949918875648'){
// console.log(renderedTweet, data);
// }
};export{renderTweet};
//# sourceMappingURL=renderTweet.js.map
